<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VAPE Market - Telegram Mini App</title>
    <style>
        /* –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 15px;
        }
        
        .container {
            max-width: 100%;
            background: white;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* –®–ê–ü–ö–ê */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
            border-radius: 10px;
            margin-bottom: 15px;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .user-info button {
            background: white;
            color: #667eea;
            border: none;
            padding: 6px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }
        
        /* –ö–ê–¢–ï–ì–û–†–ò–ò */
        .categories {
            margin: 20px 0;
        }
        
        .category-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .category-card {
            background: #f8f9fa;
            padding: 15px 8px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            border: 2px solid #e9ecef;
        }
        
        .category-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        /* –û–ë–™–Ø–í–õ–ï–ù–ò–Ø */
        .ads-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 10px;
        }
        
        .ad-card {
            background: white;
            border-radius: 10px;
            padding: 12px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
            border: 1px solid #dee2e6;
        }
        
        .ad-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 8px;
        }
        
        .ad-title {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 16px;
        }
        
        .ad-price {
            color: #28a745;
            font-weight: bold;
            font-size: 18px;
            margin: 8px 0;
        }
        
        /* –ö–ù–û–ü–ö–ò */
        .add-btn {
            position: fixed;
            bottom: 80px;
            right: 15px;
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 3px 10px rgba(40,167,69,0.3);
            z-index: 1000;
        }
        
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 12px;
            box-shadow: 0 -2px 8px rgba(0,0,0,0.1);
        }
        
        .bottom-nav button {
            background: none;
            border: none;
            padding: 8px 15px;
            cursor: pointer;
            font-size: 14px;
            color: #667eea;
            border-radius: 8px;
        }
        
        .bottom-nav button:hover {
            background: #f8f9fa;
        }
        
        /* –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
        }
        
        .modal-content {
            background: white;
            margin: 10% auto;
            padding: 20px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .close {
            position: absolute;
            right: 15px;
            top: 10px;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }
        
        /* –§–û–†–ú–´ */
        .form-group {
            margin: 12px 0;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 14px;
        }
        
        .form-group textarea {
            height: 80px;
            resize: vertical;
        }
        
        .submit-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px;
            width: 100%;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 15px;
        }
        
        /* –§–û–¢–û */
        .photo-section {
            margin: 15px 0;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 2px dashed #dee2e6;
        }
        
        .photo-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 10px 0;
            min-height: 80px;
        }
        
        .photo-item {
            position: relative;
            width: 70px;
            height: 70px;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .remove-photo {
            position: absolute;
            top: 3px;
            right: 3px;
            background: rgba(220, 53, 69, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 10px;
            cursor: pointer;
        }
        
        .upload-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 8px;
        }
        
        .photo-counter {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –®–ê–ü–ö–ê -->
        <header class="header">
            <h1 style="font-size: 20px;">üöÄ VAPE Market</h1>
            <div class="user-info">
                <span id="userName">–ì–æ—Å—Ç—å</span>
                <button onclick="openProfile()">üë§</button>
            </div>
        </header>

        <!-- –ö–ê–¢–ï–ì–û–†–ò–ò -->
        <div class="categories">
            <h2 style="font-size: 18px;">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤</h2>
            <div class="category-grid">
                <div class="category-card" onclick="showCategory('liquids')">
                    <div class="category-icon">üíß</div>
                    <h3 style="font-size: 14px;">–ñ–∏–¥–∫–æ—Å—Ç–∏</h3>
                </div>
                <div class="category-card" onclick="showCategory('consumables')">
                    <div class="category-icon">üîß</div>
                    <h3 style="font-size: 14px;">–†–∞—Å—Ö–æ–¥–Ω–∏–∫–∏</h3>
                </div>
                <div class="category-card" onclick="showCategory('disposables')">
                    <div class="category-icon">üì±</div>
                    <h3 style="font-size: 14px;">–û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ</h3>
                </div>
                <div class="category-card" onclick="showCategory('pod-systems')">
                    <div class="category-icon">‚ö°</div>
                    <h3 style="font-size: 14px;">–ü–æ–¥-—Å–∏—Å—Ç–µ–º—ã</h3>
                </div>
            </div>
        </div>

        <!-- –û–ë–™–Ø–í–õ–ï–ù–ò–Ø -->
        <div class="ads-section">
            <h2 style="font-size: 18px;">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h2>
            <div id="adsContainer" class="ads-grid">
                <!-- –ó–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –æ–±—ä—è–≤–ª–µ–Ω–∏—è -->
                <div class="ad-card">
                    <img src="https://via.placeholder.com/300x150/667eea/fff?text=VAPE+–ü—Ä–∏–º–µ—Ä" class="ad-image">
                    <div class="ad-title">–ñ–∏–¥–∫–æ—Å—Ç—å Berry Mix</div>
                    <div style="color: #666; font-size: 14px; margin: 5px 0;">–í–∫—É—Å–Ω–∞—è —è–≥–æ–¥–Ω–∞—è —Å–º–µ—Å—å 50–º–≥</div>
                    <div class="ad-price">1500 —Ä—É–±.</div>
                    <div style="color: #888; font-size: 12px;">–ü—Ä–æ–¥–∞–≤–µ—Ü: @vape_seller</div>
                    <button class="submit-btn" style="margin-top: 10px;" onclick="contactSeller(123, 'vape_seller')">üí¨ –ù–∞–ø–∏—Å–∞—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- –ö–ù–û–ü–ö–ê –î–û–ë–ê–í–õ–ï–ù–ò–Ø -->
        <button class="add-btn" onclick="openAddForm()">+ –î–æ–±–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</button>

        <!-- –ü–ê–ù–ï–õ–¨ –ù–ê–í–ò–ì–ê–¶–ò–ò -->
        <nav class="bottom-nav">
            <button onclick="showHome()">üè† –ì–ª–∞–≤–Ω–∞—è</button>
            <button onclick="showMyAds()">üìã –ú–æ–∏</button>
            <button onclick="showChats()">üí¨ –ß–∞—Ç</button>
        </nav>
    </div>

    <!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div id="modalBody"></div>
        </div>
    </div>
    
    <!-- –°–ö–†–´–¢–´–ô INPUT –î–õ–Ø –§–û–¢–û -->
    <input type="file" id="photoInput" accept="image/*" multiple style="display: none;">

    <script>
        // ========== –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ==========
        let tg = window.Telegram?.WebApp || {};
        let selectedPhotos = [];
        let ads = [
            {
                id: 1,
                userId: 123,
                username: "vape_seller",
                category: "liquids",
                title: "–ñ–∏–¥–∫–æ—Å—Ç—å Berry Mix 50–º–≥",
                description: "–í–∫—É—Å–Ω–∞—è —è–≥–æ–¥–Ω–∞—è —Å–º–µ—Å—å, –∫—Ä–µ–ø–æ—Å—Ç—å 50–º–≥, 30–º–ª",
                price: 1500,
                photos: ["https://via.placeholder.com/300x150/667eea/fff?text=VAPE+–ü—Ä–∏–º–µ—Ä"],
                date: "2024-01-15"
            }
        ];
        
        let user = {
            id: Math.floor(Math.random() * 10000),
            username: "user_" + Math.floor(Math.random() * 1000)
        };
        
        // ========== –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò ==========
        
        // –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            console.log("–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ!");
            document.getElementById('userName').textContent = user.username;
            loadAds();
        });
        
        // –ó–∞–≥—Ä—É–∑–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è
        function loadAds() {
            const container = document.getElementById('adsContainer');
            if (!container) return;
            
            container.innerHTML = '';
            
            ads.forEach(ad => {
                const adHTML = `
                    <div class="ad-card">
                        ${ad.photos && ad.photos.length > 0 ? 
                            `<img src="${ad.photos[0]}" class="ad-image" alt="${ad.title}">` : 
                            `<div style="height:150px; background:#eee; border-radius:8px; display:flex; align-items:center; justify-content:center; color:#666;">–ù–µ—Ç —Ñ–æ—Ç–æ</div>`
                        }
                        <div class="ad-title">${ad.title}</div>
                        <div style="color:#666; font-size:14px; margin:5px 0;">${ad.description}</div>
                        <div class="ad-price">${ad.price} —Ä—É–±.</div>
                        <div style="color:#888; font-size:12px;">–ü—Ä–æ–¥–∞–≤–µ—Ü: @${ad.username}</div>
                        <button class="submit-btn" style="margin-top:10px;" onclick="contactSeller(${ad.userId}, '${ad.username}')">
                            üí¨ –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–¥–∞–≤—Ü—É
                        </button>
                        ${ad.userId === user.id ? `
                            <button class="submit-btn" style="background:#dc3545; margin-top:5px;" onclick="deleteAd(${ad.id})">
                                ‚ùå –£–¥–∞–ª–∏—Ç—å
                            </button>
                        ` : ''}
                    </div>
                `;
                container.innerHTML += adHTML;
            });
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
        function showCategory(category) {
            const names = {
                liquids: '–ñ–∏–¥–∫–æ—Å—Ç–∏',
                consumables: '–†–∞—Å—Ö–æ–¥–Ω–∏–∫–∏',
                disposables: '–û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ',
                'pod-systems': '–ü–æ–¥-—Å–∏—Å—Ç–µ–º—ã'
            };
            
            openModal(`
                <h2>${names[category]}</h2>
                <p>–í—ã –≤—ã–±—Ä–∞–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é: <strong>${names[category]}</strong></p>
                <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç —Ç–æ–≤–∞—Ä—ã —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.</p>
                <button class="submit-btn" onclick="openAddForm('${category}')">
                    + –î–æ–±–∞–≤–∏—Ç—å –≤ "${names[category]}"
                </button>
            `);
        }
        
        // –û—Ç–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
        function openAddForm(category = '') {
            selectedPhotos = [];
            
            const formHTML = `
                <h2>üì§ –î–æ–±–∞–≤–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</h2>
                <form id="addForm" onsubmit="event.preventDefault(); addNewAd();">
                    <div class="form-group">
                        <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                        <select id="category" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                            <option value="liquids" ${category === 'liquids' ? 'selected' : ''}>–ñ–∏–¥–∫–æ—Å—Ç–∏</option>
                            <option value="consumables" ${category === 'consumables' ? 'selected' : ''}>–†–∞—Å—Ö–æ–¥–Ω–∏–∫–∏</option>
                            <option value="disposables" ${category === 'disposables' ? 'selected' : ''}>–û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ</option>
                            <option value="pod-systems" ${category === 'pod-systems' ? 'selected' : ''}>–ü–æ–¥-—Å–∏—Å—Ç–µ–º—ã</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞:</label>
                        <input type="text" id="title" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ñ–∏–¥–∫–æ—Å—Ç—å Berry Mix">
                    </div>
                    
                    <div class="form-group">
                        <label>–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                        <textarea id="description" required placeholder="–û–ø–∏—à–∏—Ç–µ —Ç–æ–≤–∞—Ä..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>–¶–µ–Ω–∞ (—Ä—É–±.):</label>
                        <input type="number" id="price" required min="1" placeholder="1500">
                    </div>
                    
                    <!-- –°–ï–ö–¶–ò–Ø –§–û–¢–û -->
                    <div class="photo-section">
                        <label>–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ (–º–∞–∫—Å. 3):</label>
                        <div class="photo-preview" id="photoPreview"></div>
                        
                        <button type="button" class="upload-btn" onclick="addPhoto()" id="addPhotoBtn">
                            üì∏ –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ
                        </button>
                        
                        <div class="photo-counter" id="photoCounter">0/3 —Ñ–æ—Ç–æ</div>
                    </div>
                    
                    <button type="submit" class="submit-btn">‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
                </form>
            `;
            
            openModal(formHTML);
            updatePhotoPreview();
        }
        
        // –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ
        function addPhoto() {
            if (selectedPhotos.length >= 3) {
                alert('–ú–∞–∫—Å–∏–º—É–º 3 —Ñ–æ—Ç–æ!');
                return;
            }
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º Telegram: tg.showPhotoPicker()
            // –î–ª—è —Ç–µ—Å—Ç–∞ - —Å–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤–æ–µ —Ñ–æ—Ç–æ
            const newPhoto = {
                id: Date.now(),
                url: `https://via.placeholder.com/200x150/667eea/fff?text=–§–æ—Ç–æ+${selectedPhotos.length + 1}`,
                name: `photo_${selectedPhotos.length + 1}.jpg`
            };
            
            selectedPhotos.push(newPhoto);
            updatePhotoPreview();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É
            const btn = document.getElementById('addPhotoBtn');
            if (btn && selectedPhotos.length >= 3) {
                btn.disabled = true;
                btn.style.background = '#ccc';
            }
        }
        
        // –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–≤—å—é —Ñ–æ—Ç–æ
        function updatePhotoPreview() {
            const preview = document.getElementById('photoPreview');
            const counter = document.getElementById('photoCounter');
            
            if (!preview || !counter) return;
            
            preview.innerHTML = '';
            
            selectedPhotos.forEach((photo, index) => {
                const div = document.createElement('div');
                div.className = 'photo-item';
                div.innerHTML = `
                    <img src="${photo.url}" alt="–§–æ—Ç–æ">
                    <button class="remove-photo" onclick="removePhoto(${index})">√ó</button>
                `;
                preview.appendChild(div);
            });
            
            counter.textContent = `${selectedPhotos.length}/3 —Ñ–æ—Ç–æ`;
        }
        
        // –£–¥–∞–ª–∏—Ç—å —Ñ–æ—Ç–æ
        function removePhoto(index) {
            selectedPhotos.splice(index, 1);
            updatePhotoPreview();
            
            // –í–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É –µ—Å–ª–∏ —Å—Ç–∞–ª–æ –º–µ–Ω—å—à–µ 3 —Ñ–æ—Ç–æ
            const btn = document.getElementById('addPhotoBtn');
            if (btn && selectedPhotos.length < 3) {
                btn.disabled = false;
                btn.style.background = '#28a745';
            }
        }
        
        // –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
        function addNewAd() {
            const category = document.getElementById('category')?.value;
            const title = document.getElementById('title')?.value;
            const description = document.getElementById('description')?.value;
            const price = document.getElementById('price')?.value;
            
            if (!category || !title || !description || !price) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }
            
            const newAd = {
                id: Date.now(),
                userId: user.id,
                username: user.username,
                category: category,
                title: title,
                description: description,
                price: parseInt(price),
                photos: selectedPhotos.length > 0 
                    ? selectedPhotos.map(p => p.url) 
                    : ['https://via.placeholder.com/300x150/ccc/fff?text=–ù–µ—Ç+—Ñ–æ—Ç–æ'],
                date: new Date().toLocaleDateString('ru-RU')
            };
            
            ads.unshift(newAd); // –î–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ
            closeModal();
            loadAds();
            alert('‚úÖ –û–±—ä—è–≤–ª–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ!');
        }
        
        // –£–¥–∞–ª–∏—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
        function deleteAd(adId) {
            if (confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ?')) {
                ads = ads.filter(ad => ad.id !== adId);
                loadAds();
            }
        }
        
        // –°–≤—è–∑–∞—Ç—å—Å—è —Å –ø—Ä–æ–¥–∞–≤—Ü–æ–º
        function contactSeller(sellerId, sellerUsername) {
            openModal(`
                <h2>üí¨ –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ–¥–∞–≤—Ü—É</h2>
                <p>–ü—Ä–æ–¥–∞–≤–µ—Ü: <strong>@${sellerUsername}</strong></p>
                <p>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –Ω–∞–ø–∏—Å–∞—Ç—å –≤ Telegram:</p>
                <button class="submit-btn" onclick="sendMessage(${sellerId}, '${sellerUsername}')">
                    üì® –û—Ç–∫—Ä—ã—Ç—å Telegram
                </button>
            `);
        }
        
        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
        function sendMessage(userId, username) {
            alert(`–û—Ç–∫—Ä–æ–µ—Ç—Å—è —á–∞—Ç —Å @${username}\n\n–í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –≤—ã –ø–µ—Ä–µ–π–¥–µ—Ç–µ –≤ Telegram.`);
            closeModal();
        }
        
        // –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
        function openProfile() {
            openModal(`
                <h2>üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
                <p><strong>–ò–º—è:</strong> @${user.username}</p>
                <p><strong>ID:</strong> ${user.id}</p>
                <p><strong>–ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è:</strong> ${ads.filter(ad => ad.userId === user.id).length}</p>
                <button class="submit-btn" onclick="showMyAds()">üìã –ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</button>
            `);
        }
        
        // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
        function showMyAds() {
            const myAds = ads.filter(ad => ad.userId === user.id);
            
            if (myAds.length === 0) {
                openModal(`
                    <h2>üìã –ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h2>
                    <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–π.</p>
                    <button class="submit-btn" onclick="openAddForm()">+ –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤–æ–µ</button>
                `);
                return;
            }
            
            let html = '<h2>üìã –ú–æ–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h2>';
            myAds.forEach(ad => {
                html += `
                    <div style="border:1px solid #ddd; padding:10px; margin:10px 0; border-radius:8px;">
                        <strong>${ad.title}</strong><br>
                        –¶–µ–Ω–∞: ${ad.price} —Ä—É–±.<br>
                        <button class="submit-btn" style="background:#dc3545; margin-top:5px;" 
                                onclick="deleteAd(${ad.id})">‚ùå –£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                `;
            });
            
            html += `<button class="submit-btn" onclick="openAddForm()">+ –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ</button>`;
            openModal(html);
        }
        
        // –ù–∞–≤–∏–≥–∞—Ü–∏—è
        function showHome() {
            window.scrollTo(0, 0);
        }
        
        function showChats() {
            openModal(`
                <h2>üí¨ –°–æ–æ–±—â–µ–Ω–∏—è</h2>
                <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç –≤–∞—à–∏ –ø–µ—Ä–µ–ø–∏—Å–∫–∏.</p>
                <p>–í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ...</p>
            `);
        }
        
        // ========== –£–¢–ò–õ–ò–¢–´ ==========
        
        // –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        function openModal(content) {
            const modal = document.getElementById('modal');
            const modalBody = document.getElementById('modalBody');
            
            if (modal && modalBody) {
                modalBody.innerHTML = content;
                modal.style.display = 'block';
            } else {
                alert('–û—à–∏–±–∫–∞: –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');
            }
        }
        
        // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
        function closeModal() {
            const modal = document.getElementById('modal');
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        // –ó–∞–∫—Ä—ã—Ç—å –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –æ–∫–Ω–∞
        window.onclick = function(event) {
            const modal = document.getElementById('modal');
            if (event.target == modal) {
                closeModal();
            }
        };
    </script>
</body>
</html>
